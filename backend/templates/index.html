<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Multi-Agent Travel Planner</title>

<style>
    body {
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background: #f7f9fc;
        margin: 0;
        padding: 0;
        color: #333;
    }

    .container {
        max-width: 500px;
        margin: 60px auto;
        background: #fff;
        padding: 35px 45px;
        border-radius: 12px;
        box-shadow: 0 4px 25px rgba(0,0,0,0.1);
    }

    h1 {
        text-align: center;
        margin-bottom: 30px;
        font-size: 28px;
        font-weight: 600;
        color: #222;
    }

    label {
        display: block;
        margin-bottom: 15px;
        font-weight: 500;
    }

    input {
        margin-top: 6px;
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 15px;
        transition: border-color 0.2s ease;
    }

    input:focus {
        border-color: #0078ff;
        outline: none;
        box-shadow: 0 0 4px rgba(0,120,255,0.3);
    }

    button {
        margin-top: 20px;
        width: 100%;
        background: #0078ff;
        color: #fff;
        padding: 12px;
        font-size: 17px;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.25s ease;
    }

    button:hover {
        background: #005fcc;
    }

    p {
        text-align: center;
        font-size: 14px;
        margin-top: 20px;
        color: #666;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to   { transform: rotate(360deg); }
    }
</style>
</head>

<body>

<div class="container">
    <h1>Multi-Agent Travel Planner</h1>
    <iframe id="downloadFrame" name="downloadFrame" style="display:none;"></iframe>
    <form action="/plan" method="post" target="downloadFrame">
        <div id="loading" style="
            display:none;
            margin-top:20px;
            text-align:center;
            font-size:16px;
        ">
            <div class="spinner" style="
                width:40px;
                height:40px;
                border:4px solid #ccc;
                border-top-color:#0078ff;
                border-radius:50%;
                margin:0 auto 12px auto;
                animation: spin 0.8s linear infinite;
            "></div>
            Generating your itinerary...
        </div>


        <label>Origin:
            <input name="origin" value="Denver">
        </label>

        <label>Destination:
            <input name="destination" value="Rome, Italy">
        </label>

        <label>Departure date:
            <input type="date" name="departure_date" required>
        </label>

        <label>Nights:
            <input name="nights" value="7" type="number">
        </label>

        <label>Budget (USD):
            <input name="budget" value="4000">
        </label>
        <label>Other Notes (interests, number of travelers, etc.)
            <textarea name="notes" rows="5" cols="33">None</textarea>
        </label>
        <button type="submit">Plan Trip</button>
    </form>

    <p>Your custom AI-powered itinerary will be generated as a PDF.</p>
</div>
<script>
    const form = document.querySelector("form");
    const loading = document.getElementById("loading");
    const button = document.querySelector("button[type=submit]");
    const iframe = document.getElementById("downloadFrame");

    // Show loading spinner when submitting
    form.addEventListener("submit", () => {
        loading.style.display = "block";
        button.disabled = true;
        button.textContent = "Please wait...";
    });

    // Hide spinner once the iframe receives the PDF (aka response finished)
    iframe.onload = () => {
        console.log("IFRAME LOADED")
        loading.style.display = "none";
        button.disabled = false;
        button.textContent = "Plan Trip";
    };
</script>

</body>
</html>
